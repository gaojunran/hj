# å¸¸è§é—®é¢˜

## å·²ç»æœ‰äº† Git / jj-vcsï¼Œä¸ºä»€ä¹ˆè¿˜è¦è‡ªå·±é€ ä¸€ä¸ªå·¥å…·ï¼Ÿ

[Git](https://git-scm.com/) æœ‰ç€æ‚ ä¹…çš„å†å²ï¼Œå¹¶ä¸”ç»å¤§å¤šæ•°å¼€æºä»£ç éƒ½æ‰˜ç®¡åœ¨åŸºäº Git çš„å¹³å°ä¸Šã€‚å‡ ä¹ä¸å¯èƒ½æ’¼åŠ¨ Git çš„åœ°ä½ã€‚

ä½†æ˜¯ä½ ä¼šå‘ç° Git **å¹¶ä¸å¥½ç”¨**ã€‚

å¤§å¤šæ•°äººçš„å·¥ä½œæµæ˜¯å•ä¸€çš„ï¼Œè€Œ Git åšäº†å¤ªå¤šäº‹æƒ…ã€‚å¾ˆå¤šèµ„æ·±çš„ç¨‹åºå‘˜ä¸€æ—¦é‡åˆ°ä¸€äº›ç›¸å¯¹å¤æ‚çš„ Git ä½¿ç”¨åœºæ™¯ï¼Œéƒ½è¦å»åå¤æŸ¥é˜…å„ç§æ–‡æ¡£ã€‚Git çš„å‘½ä»¤ç¹æ‚ã€æ‰‹å†Œå†—é•¿ã€‚å®ƒçš„å¾ˆå¤šè®¾è®¡ç†å¿µæ–°æ‰‹éš¾ä»¥ç†è§£ã€‚

å¦‚æœä½ æ„Ÿå…´è¶£çš„è¯ï¼Œè¿™é‡Œæœ‰ä¸€ç¯‡å…³äº Git çš„æ–‡ç« ï¼š[å…³äº Git çš„ç¤¼èŠ‚](https://www.yinwang.org/blog-cn/2015/03/11/git-etiquette)ã€‚

[jj-vcs](https://github.com/jj-vcs/jj) æ˜¯ä¸€ä¸ªé©æ–°æ€§çš„å·¥å…·ï¼Œå…·å¤‡äº†å¾ˆå¤šæ–°çš„ç†å¿µï¼š

- å·¥ä½œå‰¯æœ¬ï¼ˆå·¥ä½œåŒºï¼‰ä¹Ÿæ˜¯ä¸€ä¸ªæäº¤ã€‚è¿™æ ·ä¸éœ€è¦ stashï¼Œè€Œä¸”åˆ‡æ¢åˆ†æ”¯å’Œå˜åŸºæ°¸è¿œä¸ä¼šå¤±è´¥ã€‚
- ä¸éœ€è¦ç´¢å¼•åŒºï¼ˆæš‚å­˜åŒºï¼‰ï¼Œæ‰€æœ‰å˜æ›´é»˜è®¤è¢«æäº¤ï¼Œä¹ŸåŒ…æ‹¬ Git ä¸­çš„æœªè¿½è¸ªæ–‡ä»¶ã€‚
- ä¸å†éœ€è¦äº¤äº’å¼å˜åŸºï¼Œå­æäº¤ä¼šè¢«è‡ªåŠ¨å˜åŸºã€‚
- ä½¿ç”¨å‡½æ•°å¼è¯­è¨€æŒ‡å®šæ–‡ä»¶å’Œå˜æ›´ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ä¸Šå¤æ—¶æœŸçš„æ–¹å¼è§£ææ–‡æœ¬ã€‚
- æœ‰ç€é»˜è®¤çš„æ ¹æäº¤ã€‚
- â€¦â€¦

è¿™äº›ç†å¿µä¸Šçš„é©æ–°ä½¿å¾— jj çš„æœ¬åœ°ç‰ˆæœ¬æ§åˆ¶éå¸¸ä¼˜ç§€ã€‚

ä½†æ˜¯ jj åœ¨ä¸ Git è¿œç¨‹çš„äº’ä½œæ€§ä¸Šæœ‰å¾…è¿›æ­¥ã€‚ä¾‹å¦‚ä¹¦ç­¾ï¼ˆåˆ†æ”¯ HEADï¼‰å¹¶ä¸ä¼šéšç€æäº¤è€Œæ¨è¿›ï¼›pull / push çš„æ¨¡å‹ä¾ç„¶éœ€è¦éå¸¸ç†Ÿç»ƒæ‰èƒ½æŒæ¡ã€‚jj ä¸ Git Forgeï¼ˆå¦‚ GitHubï¼‰çš„äº’ä½œæ€§ä¹Ÿä¸å¤Ÿå¥½ã€‚

è€Œä¸” jj æ˜¯å¦ä¸€å¥—å·¥å…·å’Œä½¿ç”¨ç†å¿µï¼Œä¸è®ºä½ æ˜¯å¦å­¦è¿‡ Git éƒ½æœ‰ç€ä¸å°çš„å­¦ä¹ æˆæœ¬ã€‚

æ‰€ä»¥æœ‰äº† hjï¼Œè‡´åŠ›äºåŸºäº jj çš„ä¼˜ç§€ç†å¿µï¼Œæä¾›ä¸€ä¸ª 90% åœºæ™¯ä¸‹æç®€çš„ç‰ˆæœ¬æ§åˆ¶ä½“éªŒï¼Œé™ä½ä½ çš„å­¦ä¹ æˆæœ¬ï¼ˆä½ ç”šè‡³å¯ä»¥åœ¨ä¸äº†è§£ Git å’Œ jj çš„æƒ…å†µä¸‹ä¸Šæ‰‹ï¼‰ï¼Œå¹¶ä¸”åœ¨ä¸€äº›ç‰¹æ®Šåœºæ™¯ä¸­ä½ å¯ä»¥éšæ—¶åˆ‡æ¢å› jj è¿›è¡Œæ“ä½œã€‚è¿™ç¬¦åˆ [æ¸è¿›æ€§](https://talks.antfu.me/2024/vue-amsterdam/) çš„è®¾è®¡ç†å¿µã€‚

è®©æˆ‘ä»¬æ¥ä¸¾å‡ ä¸ªä¾‹å­è¯´æ˜ hj ç›¸è¾ƒäº jj çš„æç®€æ€§ï¼š

- ä½ å¯ä»¥ä¸€è¡Œå‘½ä»¤å¼€å§‹ç‰ˆæœ¬æ§åˆ¶ã€æ–°å»ºä¸€ä¸ªé»˜è®¤çš„ä¸»åˆ†æ”¯ã€åˆ›å»ºä¸€ä¸ª GitHub ä»“åº“ã€å¹¶æŠŠè¿œç¨‹ä»“åº“å…³è”åˆ°æœ¬åœ°ï¼š

```sh
hj init --gh
```

- ä½ å¯ä»¥ä¸€è¡Œå‘½ä»¤æäº¤æŒ‡å®šæ–‡ä»¶ï¼Œå¹¶ç»™å‡ºæäº¤ä¿¡æ¯ï¼š

```sh
hj commit "feat: add new feature"
```

- ä½ å¯ä»¥ä¸€è¡Œå‘½ä»¤æ‹‰å–å½“å‰åˆ†æ”¯çš„å˜æ›´ï¼Œå¹¶æ¨é€åˆ°è¿œç¨‹ï¼š

```sh
hj push main --pull
```

hj å°†ä¸æ–­è¿›æ­¥ï¼ğŸ’ªğŸ»

## ä¸ºä»€ä¹ˆä¸å‘ jj è´¡çŒ®ä»£ç ï¼Œè€Œæ˜¯ç›´æ¥å°è£… jj ï¼Ÿ

jj æ˜¯ä¸€ä¸ªæœ‰ç€ä¼˜ç§€è®¾è®¡ç†å¿µçš„å·¥å…·ï¼Œä¸ºäº†ä¿æŒå…¶åŠŸèƒ½çš„ [æ­£äº¤æ€§](https://en.wikipedia.org/wiki/Orthogonality#Computer_science)ï¼Œä¸å¯é¿å…åœ°è¦æä¾›å°½é‡ **é€šç”¨** çš„å·¥å…·ï¼Œä»¥æ»¡è¶³æ‰€æœ‰ç”¨æˆ·çš„ç‰ˆæœ¬æ§åˆ¶éœ€æ±‚ã€‚

hj çš„ç†å¿µæœ‰æ‰€ä¸åŒï¼Œã€Œç®€å•ã€æ˜¯æˆ‘ä»¬çš„ç¬¬ä¸€è®¾è®¡ç†å¿µã€‚æˆ‘ä»¬å°è£…äº†è®¸å¤šæœ‰ç”¨çš„å­å‘½ä»¤ä½¿å¾—ä½ å¯ä»¥ä»¥ **æœ€å°çš„å¿ƒæ™ºè´Ÿæ‹…** æ¥å®Œæˆ Git å’Œ jj ä¸­å¤æ‚çš„æ“ä½œã€‚ç›®å‰æˆ‘ä»¬çš„å·¥å…·æ˜¯å¯¹å¤šä¸ªå‘½ä»¤è¡Œå·¥å…·çš„ç»„åˆï¼Œä»¥å¯ç»´æŠ¤æ€§æå¼ºçš„ Rust è„šæœ¬å½¢å¼ä¸ºæ‚¨æä¾›ã€‚

æˆ‘ä»¬é¢å¤–æä¾›çš„åŠŸèƒ½ä¸­ï¼Œæˆ‘ç¡®ä¿¡å…¶ä¸­æœ‰å¾ˆå¤š jj åœ¨çŸ­æœŸå†…ä¸€å®šä¸ä¼šæä¾›ï¼Œç”šè‡³æ°¸è¿œä¸ä¼šæä¾›ï¼Œå› ä¸ºè¿™äº›åŠŸèƒ½ä¸ jj çš„è®¾è®¡ç†å¿µç›¸æ‚–ã€‚å¦‚æœä½ è¿½æ±‚ç®€å•ï¼Œä¸å¦¨æ¥å°è¯•ä¸€ä¸‹æˆ‘ä»¬çš„å·¥å…·ã€‚ ğŸ’ªğŸ»

## ç›®å‰å­˜åœ¨å“ªäº›å·²çŸ¥ç¼ºé™·ï¼Ÿ

- `hj undo` æ˜¯åŸºäº `jj undo` çš„ã€‚è€Œ hj çš„å¾ˆå¤šæ“ä½œä¸æ˜¯åŸå­åŒ–çš„ï¼Œä¾‹å¦‚ `hj switch` å†…éƒ¨æ‰§è¡Œäº†ä¸¤è¡Œ jj å‘½ä»¤ï¼Œæ‰€ä»¥ `hj undo` ä¸èƒ½å¤Ÿå®Œå…¨æ’¤é”€ä¸€ä¸ªæ“ä½œã€‚æœªæ¥æˆ‘ä»¬ä¼šæ ¹æ® `hj op restore` å°è£…ä¸€ä¸ªå‘½ä»¤ã€‚

- å› ä¸º hj åŸºäº jjï¼Œæ‰€ä»¥çŸ­æœŸå†…å‡ ä¹ä¸å¯èƒ½å®ç°å„ç§ IDE æˆ–æ’ä»¶çš„åŸç”Ÿé€‚é…ï¼ˆå› ä¸º jj çš„çŸ¥ååº¦è¿œè¿œä¸å¤Ÿï¼‰ã€‚å¦‚æœä½ éå¸¸éœ€è¦è¿™äº›é€‚é…çš„è¯ï¼Œå¯ä»¥è€ƒè™‘ [ä¸ Git ä»“åº“å…±å­˜](/cn/init.html#ä¸-git-ä»“åº“å…±å­˜)ã€‚

- hj çš„å¾ˆå¤šæ”¹å˜å·¥ä½œå‰¯æœ¬æŒ‡å‘çš„æ“ä½œä¸ä¼šè‡ªåŠ¨æ¨è¿›ä¹¦ç­¾ã€‚è¿™æ˜¯ jj çš„ç‰¹æ„è®¾è®¡ï¼Œhj æ­£åœ¨å°è¯•è§£å†³ã€‚

- hj ç›®å‰ä»…åœ¨ GitHub ä¸­å‘å¸ƒå„æ¶æ„çš„ Releaseã€‚é™¤äº†ä» GitHub æ‰‹åŠ¨ä¸‹è½½äºŒè¿›åˆ¶æ–‡ä»¶å¤–ï¼Œä½ ä»…èƒ½é€šè¿‡ `cargo install --path .` æ¥ä»æºç ç¼–è¯‘ã€‚æœªæ¥æˆ‘ä»¬å°†ä¼šè‡³å°‘æ”¯æŒä»¥ä¸‹å®‰è£…æ–¹å¼ï¼š 
  - [scoop](https://scoop.sh/) (Windows)ã€
  - PowerShell script (Windows)ã€
  - [homebrew](https://brew.sh/) (macOS, Linux X86)ã€
  - bash script (Unixï¼ŒåŒ…æ‹¬ WSL, Linux å’Œ macOS)ã€‚

## è·¯çº¿å›¾

> âœ… è¡¨ç¤ºå·²ç»å®ç°ï¼ŒğŸš§ è¡¨ç¤ºæ­£åœ¨å®ç°ï¼ŒğŸ¤” è¡¨ç¤ºæœªæ¥è®¡åˆ’ã€‚ä½ ä¹Ÿå¯ä»¥åœ¨ [Issues](https://github.com/gaojunran/hj/issues) é‡Œæå‡ºä½ çš„æƒ³æ³•ï¼

- âœ…ã€€`clone` æ”¯æŒçœç•¥ `owner`ã€‚
- âœ…ã€€`hj clone --fork`
- âœ…ã€€`hj commit` å’Œ `hj describe` æ—¶æ”¯æŒæ‰“å¼€ç¼–è¾‘å™¨è¿›è¡Œå¤šè¡Œæè¿°çš„ç¼–è¾‘ã€‚
- âœ…ã€€æä¾› Hooks æ”¯æŒã€‚
- ğŸ¤”ã€€å‘å¸ƒåˆ° scoopã€homebrewï¼›ç¼–å†™ PowerShell script å’Œ bash scriptã€‚
- ğŸ¤”ã€€`hj download` ä¸‹è½½å•ä¸ªæ–‡ä»¶(å¤¹) æ—¶ç›´æ¥ä¸‹è½½åˆ°æŒ‡å®šçš„ç›®å½•ï¼Œè€Œä¸åŒ…å«è¿œç¨‹ä»“åº“ä¸­çš„æ–‡ä»¶å¤¹ç»“æ„ã€‚
- ğŸ¤”ã€€`hj init` æ—¶æ”¯æŒä¸‹è½½ `.gitignore`ã€‚ï¼ˆ[æ¥æº](https://github.com/github/gitignore)ï¼‰
- ğŸ¤”ã€€å…¨é¢æ”¯æŒ GitLabã€‚
- ğŸ¤”ã€€`hj rollback`ï¼šäº¤äº’å¼é€‰æ‹©è¦å›é€€çš„å‘½ä»¤ã€‚
- ğŸ¤”ã€€ä¼˜åŒ–ä¸ Git ä»“åº“å…±å­˜æ—¶çš„ä½“éªŒã€‚
- ğŸ¤”ã€€æä¾›æ›´å¤šä¸ `hj log` ç›¸å…³çš„ç®€åŒ–å‘½ä»¤ã€‚
- ğŸ¤”ã€€å®Œå–„çš„ Stacked PR æ”¯æŒã€‚

## hj æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ

hj ç”¨ Rust è¯­è¨€ç¼–å†™çš„ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ã€‚

ç›®å‰å¤šæ•°å­å‘½ä»¤æˆ‘ä»¬ä½¿ç”¨ Shell Command çš„å½¢å¼æ„å»ºåŸºäº jjã€Gitã€gh ç­‰å·¥å…·çš„å‘½ä»¤ã€‚

:::tip ç§»é™¤ jjã€gitã€gh ä¾èµ–çš„è®¡åˆ’

ç›®å‰ hj å¼ºä¾èµ– jj å¯æ‰§è¡Œæ–‡ä»¶ï¼›æ¶‰åŠ GitHub çš„æ“ä½œå¼ºä¾èµ– ghï¼ˆæœ‰äº›æ“ä½œå¦‚ä¸‹è½½ä»“åº“æ˜¯è°ƒç”¨çš„ GitHub APIï¼‰ï¼›æ¶‰åŠ[ä¸ Git ä»“åº“å…±å­˜](/cn/init.html#ä¸-git-ä»“åº“å…±å­˜)çš„æ“ä½œå¼ºä¾èµ– Gitã€‚

æœªæ¥æˆ‘ä»¬å°†é€æ­¥ç§»é™¤è¿™äº›ä¾èµ–ã€‚

- é¦–å…ˆï¼Œjj æ˜¯ hj çš„æ ¸å¿ƒä¾èµ–ã€‚ä½† [jj-cli](https://crates.io/crates/jj-cli) å’Œ [jj-lib](https://crates.io/crates/jj-lib) å‡æœªç¨³å®šï¼Œæ‰€ä»¥æˆ‘ä»¬ç›®å‰ä»¥è°ƒç”¨å’Œè§£æ jj CLI è¾“å‡ºçš„å½¢å¼ä½¿ç”¨ jjã€‚

- å…¶æ¬¡ï¼Œgh æ˜¯ GitHub çš„å®˜æ–¹ CLI å·¥å…·ï¼Œä½†å…¶å¾ˆå¤§ç¨‹åº¦ä¸Šä¾èµ–æœ¬åœ°çš„ Git ä»“åº“ï¼Œè€Œä¸”æ‰€æœ‰æ“ä½œéƒ½å¯ä»¥æ¢ç”¨ GitHub API å®ç°ã€‚æœªæ¥æˆ‘ä»¬ä¼šä½¿ç”¨ GitHub API çš„ Rust Client æ¥æ›¿æ¢ ghã€‚

- æœ€åï¼Œå½“æˆ‘ä»¬ä¸ Git ä»“åº“å…±å­˜æ—¶ä¼šä¾èµ– Gitã€‚æœªæ¥æˆ‘ä»¬ä¼šä½¿ç”¨ Git çš„ Rust ç»‘å®šæ¥æ›¿æ¢å¯¹ Git çš„è°ƒç”¨ã€‚

:::

è€Œä¸€äº›å­å‘½ä»¤ï¼ˆå¦‚ `hj squash/split/rebase` ç­‰ï¼‰ï¼Œç›´æ¥è°ƒç”¨ jj æ¥å®ç°ï¼Œä¸åšä»»ä½•å‘½ä»¤è¡Œå‚æ•°çš„è½¬æ¢å’Œå‘½ä»¤çš„å°è£…ï¼Œè¿™æ˜¯å› ä¸ºå®ƒä»¬å·²ç»åšå¾—è¶³å¤Ÿå®Œå–„äº†ï¼Œä¸éœ€è¦å¤šä½™çš„å°è£…ã€‚

## æˆ‘åº”è¯¥ä» Git åˆ‡æ¢åˆ° Jujutsu æˆ– hj å—ï¼Ÿ

åˆ‡æ¢æˆæœ¬å¾ˆä½ï¼Œå› ä¸ºå®ƒå¯ä»¥ä¸æ‚¨ç°æœ‰çš„å·¥ä½œæµç¨‹æ— ç¼é›†æˆã€‚å¦ç™½è¯´ï¼Œæœ€å¤šä¸€å¤©å°±èƒ½ä¹ æƒ¯ä½¿ç”¨ï¼Œè€Œä¸”ä½¿ç”¨å¥½ä¸œè¥¿ç¡®å®æœ‰é“ç†ã€‚å½“ç„¶ï¼Œä½ å¯ä»¥åœ¨ä»»ä½•é£Ÿå“å®‰å…¨çš„å£¶é‡Œæ³¡å‡ºå¥½èŒ¶ï¼Œä½†å¦‚æœä½ æœ‰ä¸€ä¸ªæ¼‚äº®çš„èŒ¶å£¶ï¼Œæ¯æ¬¡æ³¡èŒ¶éƒ½ä¼šäº«å—ã€‚ä½ ä¸€å®šç»å¸¸ä½¿ç”¨ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œä¸ºä»€ä¹ˆä¸è®©å®ƒä¹Ÿå˜å¾—æ„‰å¿«å‘¢ï¼Ÿ

> è¿™ä¸ªæ¯”å–»æ¥è‡ª [kubamartin çš„åšæ–‡](https://kubamartin.com/posts/introduction-to-the-jujutsu-vcs/)ã€‚
